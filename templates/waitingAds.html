{% extends 'base.html' %}
{% load static%}
{% load i18n %}
{% block title %}
{{Section.name}}
{%endblock%}


{% block breadcrumb %}
<li class="breadcrumb-item "><a href="{% url 'home'%}">{% trans 'Section' %}</a></li>
<div class="vr ms-2 me-2"></div>
{%if Ads %}
<li class="breadcrumb-item active">{% trans 'Show Ads' %}</li>
{%else%}
<li class="breadcrumb-item active">{% trans 'No Ads !!' %}</li>

{%endif%}
{%endblock%}


{% block content %}

<style>
    .padding {
    padding: 0rem !important;

}

.card-img-top{

}

.card-no-border .card {
    border-color: #d7dfe3;
    border-radius: 4px;
    margin-bottom: 30px;
    -webkit-box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.05);
    box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.05)
}

.card-body {
    -ms-flex: 1 1 auto;
    flex: 1 1 auto;
    padding: 1.25rem
}


h3 {
    line-height: 30px;
    font-size: 21px
}

.m-t-20 {
    margin-top: 10px
}

.text-center {
    text-align: center !important
}









</style>


<div class="mb-4">
    <div class="padding ">
        <div class="card text-center col-md-12  ">
            <!-- Column -->

            <div class=" text-center">
                <img class="col-8" src="{% static 'img/20943595.jpg' %}" alt="image">
                <div class="card-body little-profile text-center">


                    <!--    <p>Web Designer &amp; Developer</p>-->
                    <div class="row text-center m-t-10">
                        <div class="col-lg-4 col-md-4 m-t-20">
                        </div>
                        <div class="col-lg-4 col-md-4 m-t-20 ">
                            <h3 class="m-b-0 font-light text-center"><i class="fa-regular fa-copy"></i>
                                {{countAds}} {% trans 'Ads' %}
                            </h3>
                        </div>
                        <div class="col-lg-4 col-md-4 m-t-20">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>


{%for ads in Ads %}
{% if user.id == ads.created_by.id %}
<div class="card border 1   mt-5 mb-5">
    <h5 class="card-header  bg-dark   ">

        {% elif ads.created_by.is_staff == True %}
        <div class="card border 1   mt-5 mb-5">
            <h5 class="card-header  bg-success  ">
                {% else %}


                <div class="card border 1   mt-5 mb-5" style="border-color:#55acee;">
                    <h5 class="card-header   bg-primary  " style="background-color:#55acee;">
                        {% endif %}

                        <div class="row">

                            <div class="col ">
                                {% if LANGUAGE_CODE == 'ar' %}
                                <a href="{% url 'UserProfile' ads.created_by.pk %}" class="text-white">
                                    {{ads.created_by.username}}@</a>
                                {%else%}
                                <a href="{% url 'UserProfile' ads.created_by.pk %}" class="text-white">
                                    @{{ads.created_by.username}}</a>
                                {%endif%}
                                <!--                        <small class=" text-white fw-light d-block fs-6 lh-base"><i class="fa-regular fa-clock"></i> {{ads.created_dt|date:"H:i A , d/m/Y"}}</small>-->
                                <br>
                                <a type="button" class="text-white fw-light fs-6 lh-base" data-mdb-toggle="tooltip"
                                   data-mdb-placement="bottom" title="{{ads.created_dt|date:'H:i A , d/m/Y'}}">
                                    <i class="fa-regular fa-clock"></i> {{ads.created_dt|timesince}}
                                </a>


                            </div>
                            {% if ads.pk not in li %}


                            {% else %}
                            <div class="col-2">
                                <div class="text-white ">
                                    <span class="spinner-border spinner-border-sm" role="status"
                                          aria-hidden="true"></span>

                                    {% trans 'Loading ...' %}
                                </div>
                            </div>
                            {% endif %}


                            <div class="col-1">
                                <div class="text-primary">
                                    {% if ads.pk not in l %}
                                    <a href="{% url 'saveArchivesAds' ads.pk 4 %}" class="text-white"><i
                                            class="fa-regular fa-bookmark fs-1"></i></a>
                                    {% elif ads.pk in l%}
                                    <a href="{% url 'deleteArchivesAds' ads.pk 4 %}" class="text-white"><i
                                            class="fa-solid fa-bookmark fs-1"></i></a>
                                    {% endif%}
                                </div>
                            </div>
                        </div>
                    </h5>

                    <!--  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->


                    <div class="card-body " style="transform: rotate(0);">
                        <h5 class="card-title  ">

                            <button class="btn btn-sm btn-floating  btn-primary ms-1 me-1" data-mdb-toggle="collapse"
                                    href="#ad{{ads.pk}}" role="button" aria-expanded="false"
                                    aria-controls="collapseExample"><i
                                    class="fa-solid fa-angles-down"></i></button>

                            <a href="" class="  text-decoration-underline">{{ads.subject}}</a>
                        </h5>

                        <!-- Button triggers collapse -->

                        <!-- Collapsed content -->
                        <div class="collapse mt-3 scroll-section" id="ad{{ads.pk}}">

                            <p class=""> {{ads.messageAds|safe}}</p>
                            {%if ads.img%}
                            <a href="{{ ads.img.url }}" target="_blank">
                                <img src="{{ ads.img.url }}" alt="{{ ads.subject}}" class="img-fluid" height="100"
                                     width="120">

                            </a>

                            {%endif%}
                        </div>

                    </div>
                    <div class="card-footer text-muted">

                        <div class="row">

                            {% if ads.created_by == user and user.is_superuser %}
                            <div class="col-1">
                                <a href="{% url 'Accept' ads.pk %}" class="btn btn-success btn-sm">
                                    {% trans 'Accept'%}
                                </a>
                            </div>
                            <div class="col-1">
                                <div class="">
                                    <a href="{% url 'AdsUpdateView' ads.section.pk ads.pk 4  %}"
                                       class="btn btn-info btn-sm"
                                       role="button">{% trans 'Edit' %}</a>
                                </div>

                            </div>
                            <div class="col-1">
                                <button type="button" class="btn btn-danger btn-sm" data-mdb-toggle="modal"
                                        data-mdb-target="#Reject{{ads.pk}}">
                                    {% trans 'Rejection' %}
                                </button>

                                <!-- Modal -->
                                <div class="modal fade" id="Reject{{ads.pk}}" tabindex="-1"
                                     aria-labelledby="exampleModalLabelReject" aria-hidden="true">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content ">
                                            <div class="modal-header bg-danger text-white justify-content-center ">
                                                <h3 class="modal-title" id="exampleModalLabelReject">
                                                    {% trans 'Are you sure?' %}
                                                </h3>
                                            </div>
                                            <div class="modal-body text-danger text-center ">
                                                <h1 class="text-center">
                                                    <i class="fa-solid fa-xmark"></i>
                                                </h1>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-danger"
                                                        data-mdb-dismiss="modal">
                                                    {% trans 'No' %}
                                                </button>
                                                <a href="{% url 'Rejection' ads.pk %}" class="btn btn-danger">
                                                    {% trans 'Yes' %}
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>

                            {% elif ads.created_by == user and perms.AdsBoard.change_ads %}

                            <div class="col-1">
                                <div class="">
                                    <a href="{% url 'AdsUpdateView' ads.section.pk ads.pk 4  %}"
                                       class="btn btn-info btn-sm"
                                       role="button">{% trans 'Edit' %}</a>
                                </div>

                            </div>
                            <div class="col-1">

                                <div class="">

                                    <a href="{{ads.pk}}" type="button" class="btn btn-danger btn-sm"
                                       data-mdb-toggle="modal"
                                       data-mdb-target="#ex{{ads.pk}}">
                                        {% trans 'Delete' %}
                                    </a>

                                    <!-- Modal -->
                                    <div class="modal fade" id="ex{{ads.pk}}" tabindex="-1"
                                         aria-labelledby="exampleModalLabel"
                                         aria-hidden="true">
                                        <div class="modal-dialog modal-sm">
                                            <div class="modal-content ">
                                                <div class="modal-header bg-danger text-white justify-content-center ">
                                                    <h3 class="modal-title" id="exampleModalLabel">
                                                        {% trans 'Are you sure?' %}
                                                    </h3>
                                                </div>
                                                <div class="modal-body text-danger text-center ">
                                                    <h1 class="text-center"><i class="fa-solid fa-xmark"></i></h1></div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn  btn-outline-danger"
                                                            data-mdb-dismiss="modal">{% trans 'No' %}
                                                    </button>

                                                    <a href="{% url 'DeleteAds' ads.section.pk  ads.pk 4  %}"
                                                       class="btn btn-danger" role="button">{% trans 'Yes' %}</a>


                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                            {% elif user.is_superuser %}
                            <div class="col-1">
                                <a href="{% url 'Accept' ads.pk %}" class="btn btn-success btn-sm">
                                    {% trans 'Accept' %}
                                </a>
                            </div>
                            <div class="col-1">
                                <button type="button" class="btn btn-danger btn-sm" data-mdb-toggle="modal"
                                        data-mdb-target="#Rej{{ads.pk}}">
                                    {% trans 'Rejection' %}
                                </button>

                                <!-- Modal -->
                                <div class="modal fade" id="Rej{{ads.pk}}" tabindex="-1"
                                     aria-labelledby="exampleModalLabelRej"
                                     aria-hidden="true">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content ">
                                            <div class="modal-header bg-danger text-white justify-content-center ">
                                                <h3 class="modal-title" id="exampleModalLabelRej">
                                                    {% trans 'Are you sure?' %}
                                                </h3>
                                            </div>
                                            <div class="modal-body text-danger text-center "><h1 class="text-center"><i
                                                    class="fa-solid fa-xmark"></i></h1></div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-danger"
                                                        data-mdb-dismiss="modal">
                                                    {% trans 'No' %}
                                                </button>
                                                <a href="{% url 'Rejection' ads.pk %}" class="btn btn-danger">
                                                    {% trans 'Yes' %}
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                            {% endif %}


                            <div class="col"></div>

                            <div class="col-1" data-mdb-toggle="tooltip" data-mdb-placement="bottom"
                                 title="{% trans 'Comment' %}"><i class="fa-regular fa-comments"></i>
                                {{ads.commentCount}}
                            </div>
                            <div class="col-1" data-mdb-toggle="tooltip" data-mdb-placement="bottom"
                                 title="{% trans 'View' %}">
                                <i class="fa-solid fa-eye"></i> {{ads.views}}
                            </div>
                            <div class="col-1">
                                <!--                <button class="btn btn-warning" onclick="myright()">Try</button>-->
                            </div>
                            <div class="col-3">
                                {% if LANGUAGE_CODE == 'ar' %}
                                <a href="{% url 'SectionAds' ads.section.pk%}"
                                   class="">{{ads.section.name_ar|upper}}</a>
                                {%else%}
                                <a href="{% url 'SectionAds' ads.section.pk%}" class="">
                                    {{ads.section.name|upper}}
                                </a>
                                {%endif%}

                            </div>


                        </div>
                    </div>
                </div>

                {%endfor%}


                <div class="text-center mt-5 mb-3">


                    {% if Ads.has_previous %}
                    <a class="btn btn-outline-primary mb-4" href="?page=1">{% trans 'First' %}</a>
                    <a class="btn btn-outline-primary mb-4" href="?page={{ Ads.previous_page_number }}">
                        {% trans 'Previous' %}
                    </a>
                    {% endif %}

                    {% for num in Ads.paginator.page_range %}
                    {% if Ads.number == num %}
                    <a class="btn btn-primary mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% elif num > Ads.number|add:'-3' and num < Ads.number|add:'3' %}
                    <a class="btn btn-outline-primary mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% endif %}
                    {% endfor %}

                    {% if Ads.has_next %}
                    <a class="btn btn-outline-primary mb-4" href="?page={{ Ads.next_page_number }}">{% trans 'Next' %}
                    </a>
                    <a class="btn btn-outline-primary mb-4" href="?page={{ Ads.paginator.num_pages }}">{% trans 'Last' %}
                    </a>
                    {% endif %}


                </div>


                <!--{% if Ads.has_other_pages %}-->
                <!--  <nav aria-label="Ads pagination" aria-label="..." class="mb-4 pt-3 pb-0">-->
                <!--    <ul class="pagination pagination-circle justify-content-center">-->
                <!--      {% if Ads.has_previous %}-->
                <!--        <li class="page-item">-->
                <!--          <a class="page-link" href="?page={{ Ads.previous_page_number }}">Previous</a>-->
                <!--        </li>-->
                <!--      {% else %}-->
                <!--        <li class="page-item disabled">-->
                <!--          <span class="page-link">Previous</span>-->
                <!--        </li>-->
                <!--      {% endif %}-->

                <!--      {% for page_num in Ads.paginator.page_range %}-->
                <!--        {% if Ads.number == page_num %}-->
                <!--          <li class="page-item active">-->
                <!--            <span class="page-link">-->
                <!--              {{ page_num }}-->
                <!--              <span class="sr-only">(current)</span>-->
                <!--            </span>-->
                <!--          </li>-->
                <!--        {% else %}-->
                <!--          <li class="page-item">-->
                <!--            <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>-->
                <!--          </li>-->
                <!--        {% endif %}-->
                <!--      {% endfor %}-->

                <!--      {% if Ads.has_next %}-->
                <!--        <li class="page-item">-->
                <!--          <a class="page-link" href="?page={{ Ads.next_page_number }}">Next</a>-->
                <!--        </li>-->
                <!--      {% else %}-->
                <!--        <li class="page-item disabled">-->
                <!--          <span class="page-link">Next</span>-->
                <!--        </li>-->
                <!--      {% endif %}-->
                <!--    </ul>-->
                <!--  </nav>-->
                <!--{% endif %}-->


                {%endblock%}